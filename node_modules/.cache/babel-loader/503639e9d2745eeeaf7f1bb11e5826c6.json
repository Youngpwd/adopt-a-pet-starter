{"ast":null,"code":"export { i as context } from './index-deps.js';\nimport { c as createCommonjsModule, a as commonjsGlobal, l as lib$2, j as jsonParse, i as isNodeProcess } from './fetch-deps.js';\nimport { _ as __awaiter, g as getPublicUrlFromRequest, p as parseBody, N as NetworkError } from './RequestHandler-deps.js';\nexport { R as RequestHandler, b as compose, c as createResponseComposition, a as defaultContext, d as defaultResponse, m as matchRequestUrl, r as response } from './RequestHandler-deps.js';\nimport { p as parseGraphQLRequest, G as GraphQLHandler } from './graphql-deps.js';\nexport { G as GraphQLHandler, g as graphql, a as graphqlContext } from './graphql-deps.js';\nimport { R as RestHandler, i as isStringEqual } from './rest-deps.js';\nexport { a as RESTMethods, R as RestHandler, r as rest, b as restContext } from './rest-deps.js';\nimport { p as parse_1$1 } from './xml-deps.js';\nimport { m as mergeRight } from './errors-deps.js'; // Copyright Joyent, Inc. and other Node contributors.\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\nvar ReflectOwnKeys;\n\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\n\nvar events = EventEmitter;\nvar once_1 = once; // Backwards-compat with node 0.10.x\n\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\n\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function () {\n    return defaultMaxListeners;\n  },\n  set: function (arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function () {\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}; // Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\n\n\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n\n  var doError = type === 'error';\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false; // If there is no 'error' event listener then throw.\n\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    } // At least give some kind of context to the user\n\n\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n  if (handler === undefined) return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n\n    for (var i = 0; i < len; ++i) ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n  checkListener(listener);\n  events = target._events;\n\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener); // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n\n      events = target._events;\n    }\n\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener]; // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    } // Check for listener leak\n\n\n    m = _getMaxListeners(target);\n\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true; // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0) return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = {\n    fired: false,\n    wrapFn: undefined,\n    target: target,\n    type: type,\n    listener: listener\n  };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  checkListener(listener);\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n}; // Emits a 'removeListener' event if and only if the listener was removed.\n\n\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n  checkListener(listener);\n  events = this._events;\n  if (events === undefined) return this;\n  list = events[type];\n  if (list === undefined) return this;\n\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n    if (list.length === 1) events[type] = list[0];\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n  events = this._events;\n  if (events === undefined) return this; // not listening for removeListener, no need to emit\n\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n\n    return this;\n  } // emit removeListener for all listeners on all events\n\n\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n\n  listeners = events[type];\n\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n\n  return this;\n};\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n  if (events === undefined) return [];\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\n\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n\n  for (var i = 0; i < n; ++i) copy[i] = arr[i];\n\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) list[index] = list[index + 1];\n\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n\n      resolve([].slice.call(arguments));\n    }\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, {\n      once: true\n    });\n\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, {\n        once: true\n      });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n\nevents.once = once_1;\nvar StrictEventEmitter_1 = createCommonjsModule(function (module, exports) {\n  var __extends = commonjsGlobal && commonjsGlobal.__extends || function () {\n    var extendStatics = function (d, b) {\n      extendStatics = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n      } || function (d, b) {\n        for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      };\n\n      return extendStatics(d, b);\n    };\n\n    return function (d, b) {\n      extendStatics(d, b);\n\n      function __() {\n        this.constructor = d;\n      }\n\n      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n  }();\n\n  var __spreadArrays = commonjsGlobal && commonjsGlobal.__spreadArrays || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n    for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n    return r;\n  };\n\n  exports.__esModule = true;\n  exports.StrictEventEmitter = void 0;\n\n  var StrictEventEmitter =\n  /** @class */\n  function (_super) {\n    __extends(StrictEventEmitter, _super);\n\n    function StrictEventEmitter() {\n      return _super.call(this) || this;\n    }\n\n    StrictEventEmitter.prototype.on = function (event, listener) {\n      return _super.prototype.on.call(this, event.toString(), listener);\n    };\n\n    StrictEventEmitter.prototype.once = function (event, listener) {\n      return _super.prototype.on.call(this, event.toString(), listener);\n    };\n\n    StrictEventEmitter.prototype.off = function (event, listener) {\n      return _super.prototype.off.call(this, event.toString(), listener);\n    };\n\n    StrictEventEmitter.prototype.emit = function (event) {\n      var data = [];\n\n      for (var _i = 1; _i < arguments.length; _i++) {\n        data[_i - 1] = arguments[_i];\n      }\n\n      return _super.prototype.emit.apply(this, __spreadArrays([event.toString()], data));\n    };\n\n    StrictEventEmitter.prototype.addListener = function (event, listener) {\n      return _super.prototype.addListener.call(this, event.toString(), listener);\n    };\n\n    StrictEventEmitter.prototype.removeListener = function (event, listener) {\n      return _super.prototype.removeListener.call(this, event.toString(), listener);\n    };\n\n    return StrictEventEmitter;\n  }(events.EventEmitter);\n\n  exports.StrictEventEmitter = StrictEventEmitter;\n});\nvar lib = createCommonjsModule(function (module, exports) {\n  var __createBinding = commonjsGlobal && commonjsGlobal.__createBinding || (Object.create ? function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    });\n  } : function (o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n  });\n\n  exports.__esModule = true;\n  exports.StrictEventEmitter = void 0;\n\n  __createBinding(exports, StrictEventEmitter_1, \"StrictEventEmitter\");\n});\n/**\n * Gracefully handles a given Promise factory.\n * @example\n * cosnt [error, data] = await until(() => asyncAction())\n */\n\nvar until_1 = async promise => {\n  try {\n    const data = await promise().catch(error => {\n      throw error;\n    });\n    return [null, data];\n  } catch (error) {\n    return [error, null];\n  }\n};\n\nvar until = /*#__PURE__*/Object.defineProperty({\n  until: until_1\n}, '__esModule', {\n  value: true\n});\nvar until$1 = until.until;\n/**\r\n * Attempts to resolve a Service Worker instance from a given registration,\r\n * regardless of its state (active, installing, waiting).\r\n */\n\nconst getWorkerByRegistration = (registration, absoluteWorkerUrl, findWorker) => {\n  const allStates = [registration.active, registration.installing, registration.waiting];\n  const existingStates = allStates.filter(Boolean);\n  const mockWorker = existingStates.find(worker => {\n    return findWorker(worker.scriptURL, absoluteWorkerUrl);\n  });\n  return mockWorker || null;\n};\n/**\r\n * Returns an absolute Service Worker URL based on the given\r\n * relative URL (known during the registration).\r\n */\n\n\nfunction getAbsoluteWorkerUrl(relativeUrl) {\n  return new URL(relativeUrl, location.origin).href;\n}\n/**\r\n * Returns an active Service Worker instance.\r\n * When not found, registers a new Service Worker.\r\n */\n\n\nconst getWorkerInstance = (url, options = {}, findWorker) => __awaiter(void 0, void 0, void 0, function* () {\n  // Resolve the absolute Service Worker URL.\n  const absoluteWorkerUrl = getAbsoluteWorkerUrl(url);\n  const mockRegistrations = yield navigator.serviceWorker.getRegistrations().then(registrations => registrations.filter(registration => getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker)));\n\n  if (!navigator.serviceWorker.controller && mockRegistrations.length > 0) {\n    // Reload the page when it has associated workers, but no active controller.\n    // The absence of a controller can mean either:\n    // - page has no Service Worker associated with it\n    // - page has been hard-reloaded and its workers won't be used until the next reload.\n    // Since we've checked that there are registrations associated with this page,\n    // at this point we are sure it's hard reload that falls into this clause.\n    location.reload();\n  }\n\n  const [existingRegistration] = mockRegistrations;\n\n  if (existingRegistration) {\n    // When the Service Worker is registered, update it and return the reference.\n    return existingRegistration.update().then(() => {\n      return [getWorkerByRegistration(existingRegistration, absoluteWorkerUrl, findWorker), existingRegistration];\n    });\n  } // When the Service Worker wasn't found, register it anew and return the reference.\n\n\n  const [error, instance] = yield until$1(() => __awaiter(void 0, void 0, void 0, function* () {\n    const registration = yield navigator.serviceWorker.register(url, options);\n    return [// Compare existing worker registration by its worker URL,\n    // to prevent irrelevant workers to resolve here (such as Codesandbox worker).\n    getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker), registration];\n  })); // Handle Service Worker registration errors.\n\n  if (error) {\n    const isWorkerMissing = error.message.includes('(404)'); // Produce a custom error message when given a non-existing Service Worker url.\n    // Suggest developers to check their setup.\n\n    if (isWorkerMissing) {\n      const scopeUrl = new URL((options === null || options === void 0 ? void 0 : options.scope) || '/', location.href);\n      throw new Error(`[MSW] Failed to register a Service Worker for scope ('${scopeUrl.href}') with script ('${absoluteWorkerUrl}'): Service Worker script does not exist at the given path.\n\nDid you forget to run \"npx msw init <PUBLIC_DIR>\"?\n\nLearn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`);\n    } // Fallback error message for any other registration errors.\n\n\n    throw new Error(`[MSW] Failed to register a Service Worker:\\n\\n${error.message}`);\n  }\n\n  return instance;\n});\n\nconst activateMocking = (context, options) => __awaiter(void 0, void 0, void 0, function* () {\n  context.workerChannel.send('MOCK_ACTIVATE');\n  return context.events.once('MOCKING_ENABLED').then(() => {\n    if (!(options === null || options === void 0 ? void 0 : options.quiet)) {\n      console.groupCollapsed('%c[MSW] Mocking enabled.', 'color:orangered;font-weight:bold;');\n      console.log('%cDocumentation: %chttps://mswjs.io/docs', 'font-weight:bold', 'font-weight:normal');\n      console.log('Found an issue? https://github.com/mswjs/msw/issues');\n      console.groupEnd();\n    }\n  });\n});\n/**\r\n * Creates a communication channel between the client\r\n * and the Service Worker associated with the given event.\r\n */\n\n\nconst createBroadcastChannel = event => {\n  const port = event.ports[0];\n  return {\n    /**\r\n     * Sends a text message to the connected Service Worker.\r\n     */\n    send(message) {\n      if (port) {\n        port.postMessage(message);\n      }\n    }\n\n  };\n};\n/**\r\n * Returns a mocked response for a given request using following request handlers.\r\n */\n\n\nconst getResponse = (request, handlers) => __awaiter(void 0, void 0, void 0, function* () {\n  const relevantHandlers = handlers.filter(handler => {\n    return handler.test(request);\n  });\n\n  if (relevantHandlers.length === 0) {\n    return {\n      handler: undefined,\n      response: undefined\n    };\n  }\n\n  const result = yield relevantHandlers.reduce((acc, handler) => __awaiter(void 0, void 0, void 0, function* () {\n    const previousResults = yield acc;\n\n    if (!!(previousResults === null || previousResults === void 0 ? void 0 : previousResults.response)) {\n      return acc;\n    }\n\n    const result = yield handler.run(request);\n\n    if (result === null || result.handler.shouldSkip) {\n      return null;\n    }\n\n    if (!result.response) {\n      return {\n        request: result.request,\n        handler: result.handler,\n        response: undefined,\n        parsedResult: result.parsedResult\n      };\n    }\n\n    if (result.response.once) {\n      handler.markAsSkipped(true);\n    }\n\n    return result;\n  }), Promise.resolve(null)); // Although reducing a list of relevant request handlers, it's possible\n  // that in the end there will be no handler associted with the request\n  // (i.e. if relevant handlers are fall-through).\n\n  if (!result) {\n    return {\n      handler: undefined,\n      response: undefined\n    };\n  }\n\n  return {\n    handler: result.handler,\n    publicRequest: result.request,\n    parsedRequest: result.parsedResult,\n    response: result.response\n  };\n});\n\nvar jsLevenshtein = function () {\n  function _min(d0, d1, d2, bx, ay) {\n    return d0 < d1 || d2 < d1 ? d0 > d2 ? d2 + 1 : d0 + 1 : bx === ay ? d1 : d1 + 1;\n  }\n\n  return function (a, b) {\n    if (a === b) {\n      return 0;\n    }\n\n    if (a.length > b.length) {\n      var tmp = a;\n      a = b;\n      b = tmp;\n    }\n\n    var la = a.length;\n    var lb = b.length;\n\n    while (la > 0 && a.charCodeAt(la - 1) === b.charCodeAt(lb - 1)) {\n      la--;\n      lb--;\n    }\n\n    var offset = 0;\n\n    while (offset < la && a.charCodeAt(offset) === b.charCodeAt(offset)) {\n      offset++;\n    }\n\n    la -= offset;\n    lb -= offset;\n\n    if (la === 0 || lb < 3) {\n      return lb;\n    }\n\n    var x = 0;\n    var y;\n    var d0;\n    var d1;\n    var d2;\n    var d3;\n    var dd;\n    var dy;\n    var ay;\n    var bx0;\n    var bx1;\n    var bx2;\n    var bx3;\n    var vector = [];\n\n    for (y = 0; y < la; y++) {\n      vector.push(y + 1);\n      vector.push(a.charCodeAt(offset + y));\n    }\n\n    var len = vector.length - 1;\n\n    for (; x < lb - 3;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      bx1 = b.charCodeAt(offset + (d1 = x + 1));\n      bx2 = b.charCodeAt(offset + (d2 = x + 2));\n      bx3 = b.charCodeAt(offset + (d3 = x + 3));\n      dd = x += 4;\n\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        ay = vector[y + 1];\n        d0 = _min(dy, d0, d1, bx0, ay);\n        d1 = _min(d0, d1, d2, bx1, ay);\n        d2 = _min(d1, d2, d3, bx2, ay);\n        dd = _min(d2, d3, dd, bx3, ay);\n        vector[y] = dd;\n        d3 = d2;\n        d2 = d1;\n        d1 = d0;\n        d0 = dy;\n      }\n    }\n\n    for (; x < lb;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      dd = ++x;\n\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        vector[y] = dd = _min(dy, d0, dd, bx0, vector[y + 1]);\n        d0 = dy;\n      }\n    }\n\n    return dd;\n  };\n}();\n\nconst MAX_MATCH_SCORE = 3;\nconst MAX_SUGGESTION_COUNT = 4;\nconst TYPE_MATCH_DELTA = 0.5;\n\nfunction groupHandlersByType(handlers) {\n  return handlers.reduce((groups, handler) => {\n    if (handler instanceof RestHandler) {\n      groups.rest.push(handler);\n    }\n\n    if (handler instanceof GraphQLHandler) {\n      groups.graphql.push(handler);\n    }\n\n    return groups;\n  }, {\n    rest: [],\n    graphql: []\n  });\n}\n\nfunction getScoreForRestHandler() {\n  return (request, handler) => {\n    const {\n      mask,\n      method\n    } = handler.info;\n\n    if (mask instanceof RegExp) {\n      return Infinity;\n    }\n\n    const hasSameMethod = isStringEqual(request.method, method); // Always treat a handler with the same method as a more similar one.\n\n    const methodScoreDelta = hasSameMethod ? TYPE_MATCH_DELTA : 0;\n    const requestPublicUrl = getPublicUrlFromRequest(request);\n    const score = jsLevenshtein(requestPublicUrl, mask);\n    return score - methodScoreDelta;\n  };\n}\n\nfunction getScoreForGraphQLHandler(parsedQuery) {\n  return (_, handler) => {\n    if (typeof parsedQuery.operationName === 'undefined') {\n      return Infinity;\n    }\n\n    const {\n      operationType,\n      operationName\n    } = handler.info;\n    const hasSameOperationType = parsedQuery.operationType === operationType; // Always treat a handler with the same operation type as a more similar one.\n\n    const operationTypeScoreDelta = hasSameOperationType ? TYPE_MATCH_DELTA : 0;\n    const score = jsLevenshtein(parsedQuery.operationName, operationName);\n    return score - operationTypeScoreDelta;\n  };\n}\n\nfunction getSuggestedHandler(request, handlers, getScore) {\n  const suggestedHandlers = handlers.reduce((acc, handler) => {\n    const score = getScore(request, handler);\n    return acc.concat([[score, handler]]);\n  }, []).sort(([leftScore], [rightScore]) => {\n    return leftScore - rightScore;\n  }).filter(([score]) => {\n    return score <= MAX_MATCH_SCORE;\n  }).slice(0, MAX_SUGGESTION_COUNT).map(([, handler]) => handler);\n  return suggestedHandlers;\n}\n\nfunction getSuggestedHandlersMessage(handlers) {\n  if (handlers.length > 1) {\n    return `\\\nDid you mean to request one of the following resources instead?\n\n${handlers.map(handler => `  • ${handler.info.header}`).join('\\n')}`;\n  }\n\n  return `Did you mean to request \"${handlers[0].info.header}\" instead?`;\n}\n\nfunction onUnhandledRequest(request, handlers, strategy = 'bypass') {\n  if (typeof strategy === 'function') {\n    strategy(request);\n    return;\n  }\n\n  const parsedGraphQLQuery = parseGraphQLRequest(request);\n  const handlerGroups = groupHandlersByType(handlers);\n  const relevantHandlers = parsedGraphQLQuery ? handlerGroups.graphql : handlerGroups.rest;\n  const suggestedHandlers = getSuggestedHandler(request, relevantHandlers, parsedGraphQLQuery ? getScoreForGraphQLHandler(parsedGraphQLQuery) : getScoreForRestHandler());\n  const handlerSuggestion = suggestedHandlers.length > 0 ? getSuggestedHandlersMessage(suggestedHandlers) : '';\n  const publicUrl = getPublicUrlFromRequest(request);\n  const requestHeader = parsedGraphQLQuery ? `${parsedGraphQLQuery.operationType} ${parsedGraphQLQuery.operationName} (${request.method} ${publicUrl})` : `${request.method} ${publicUrl}`;\n  const messageTemplate = [`captured a request without a matching request handler:`, `  • ${requestHeader}`, handlerSuggestion, `\\\nIf you still wish to intercept this unhandled request, please create a request handler for it.\nRead more: https://mswjs.io/docs/getting-started/mocks\\\n`].filter(Boolean);\n  const message = messageTemplate.join('\\n\\n');\n\n  switch (strategy) {\n    case 'error':\n      {\n        console.error(`[MSW] Error: ${message}`);\n        break;\n      }\n\n    case 'warn':\n      {\n        console.warn(`[MSW] Warning: ${message}`);\n        break;\n      }\n\n    default:\n      return;\n  }\n}\n\nvar defaultParseOptions = {\n  decodeValues: true,\n  map: false,\n  silent: false\n};\n\nfunction isNonEmptyString(str) {\n  return typeof str === \"string\" && !!str.trim();\n}\n\nfunction parseString(setCookieValue, options) {\n  var parts = setCookieValue.split(\";\").filter(isNonEmptyString);\n  var nameValue = parts.shift().split(\"=\");\n  var name = nameValue.shift();\n  var value = nameValue.join(\"=\"); // everything after the first =, joined by a \"=\" if there was more than one part\n\n  options = options ? Object.assign({}, defaultParseOptions, options) : defaultParseOptions;\n\n  try {\n    value = options.decodeValues ? decodeURIComponent(value) : value; // decode cookie value\n  } catch (e) {\n    console.error(\"set-cookie-parser encountered an error while decoding a cookie with value '\" + value + \"'. Set options.decodeValues to false to disable this feature.\", e);\n  }\n\n  var cookie = {\n    name: name,\n    // grab everything before the first =\n    value: value\n  };\n  parts.forEach(function (part) {\n    var sides = part.split(\"=\");\n    var key = sides.shift().trimLeft().toLowerCase();\n    var value = sides.join(\"=\");\n\n    if (key === \"expires\") {\n      cookie.expires = new Date(value);\n    } else if (key === \"max-age\") {\n      cookie.maxAge = parseInt(value, 10);\n    } else if (key === \"secure\") {\n      cookie.secure = true;\n    } else if (key === \"httponly\") {\n      cookie.httpOnly = true;\n    } else if (key === \"samesite\") {\n      cookie.sameSite = value;\n    } else {\n      cookie[key] = value;\n    }\n  });\n  return cookie;\n}\n\nfunction parse(input, options) {\n  options = options ? Object.assign({}, defaultParseOptions, options) : defaultParseOptions;\n\n  if (!input) {\n    if (!options.map) {\n      return [];\n    } else {\n      return {};\n    }\n  }\n\n  if (input.headers && input.headers[\"set-cookie\"]) {\n    // fast-path for node.js (which automatically normalizes header names to lower-case\n    input = input.headers[\"set-cookie\"];\n  } else if (input.headers) {\n    // slow-path for other environments - see #25\n    var sch = input.headers[Object.keys(input.headers).find(function (key) {\n      return key.toLowerCase() === \"set-cookie\";\n    })]; // warn if called on a request-like object with a cookie header rather than a set-cookie header - see #34, 36\n\n    if (!sch && input.headers.cookie && !options.silent) {\n      console.warn(\"Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning.\");\n    }\n\n    input = sch;\n  }\n\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n\n  options = options ? Object.assign({}, defaultParseOptions, options) : defaultParseOptions;\n\n  if (!options.map) {\n    return input.filter(isNonEmptyString).map(function (str) {\n      return parseString(str, options);\n    });\n  } else {\n    var cookies = {};\n    return input.filter(isNonEmptyString).reduce(function (cookies, str) {\n      var cookie = parseString(str, options);\n      cookies[cookie.name] = cookie;\n      return cookies;\n    }, cookies);\n  }\n}\n/*\n  Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas\n  that are within a single set-cookie field-value, such as in the Expires portion.\n\n  This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2\n  Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128\n  React Native's fetch does this for *every* header, including set-cookie.\n\n  Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25\n  Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation\n*/\n\n\nfunction splitCookiesString(cookiesString) {\n  if (Array.isArray(cookiesString)) {\n    return cookiesString;\n  }\n\n  if (typeof cookiesString !== \"string\") {\n    return [];\n  }\n\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n\n    return pos < cookiesString.length;\n  }\n\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n\n      if (ch === \",\") {\n        // ',' is a cookie separator if we have later first '=', not ';' or ','\n        lastComma = pos;\n        pos += 1;\n        skipWhitespace();\n        nextStart = pos;\n\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        } // currently special character\n\n\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          // we found cookies separator\n          cookiesSeparatorFound = true; // pos is inside the next cookie, so back up and return it.\n\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          // in param ',' or param separator ';',\n          // we continue from that comma\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n\n  return cookiesStrings;\n}\n\nvar setCookie = parse;\nvar parse_1 = parse;\nvar parseString_1 = parseString;\nvar splitCookiesString_1 = splitCookiesString;\nsetCookie.parse = parse_1;\nsetCookie.parseString = parseString_1;\nsetCookie.splitCookiesString = splitCookiesString_1;\nvar CookieStore_1 = createCommonjsModule(function (module, exports) {\n  var __rest = commonjsGlobal && commonjsGlobal.__rest || function (s, e) {\n    var t = {};\n\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n      if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n    }\n    return t;\n  };\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.PERSISTENCY_KEY = void 0;\n  exports.PERSISTENCY_KEY = 'MSW_COOKIE_STORE';\n\n  class CookieStore {\n    constructor() {\n      this.store = new Map();\n      this.supportsPersistency = typeof window !== 'undefined';\n    }\n    /**\n     * Sets the given request cookies into the store.\n     * Respects the `request.credentials` policy.\n     */\n\n\n    add(request, response) {\n      if (request.credentials === 'omit') {\n        return;\n      }\n\n      const requestUrl = new URL(request.url);\n      const responseCookies = response.headers.get('set-cookie');\n\n      if (!responseCookies) {\n        return;\n      }\n\n      const now = Date.now();\n      const parsedResponseCookies = setCookie.parse(responseCookies).map(_a => {\n        var {\n          maxAge\n        } = _a,\n            cookie = __rest(_a, [\"maxAge\"]);\n\n        return Object.assign(Object.assign({}, cookie), {\n          expires: maxAge === undefined ? cookie.expires : new Date(now + maxAge * 1000),\n          maxAge\n        });\n      }).filter(({\n        expires\n      }) => expires === undefined || expires.getTime() > now);\n      const prevCookies = this.store.get(requestUrl.origin) || new Map();\n      parsedResponseCookies.forEach(cookie => {\n        this.store.set(requestUrl.origin, prevCookies.set(cookie.name, cookie));\n      });\n    }\n    /**\n     * Returns cookies relevant to the given request\n     * and its `request.credentials` policy.\n     */\n\n\n    get(request) {\n      this.deleteExpiredCookies();\n      const requestUrl = new URL(request.url);\n      const originCookies = this.store.get(requestUrl.origin) || new Map();\n\n      switch (request.credentials) {\n        case 'include':\n          {\n            const documentCookies = setCookie.parse(document.cookie);\n            documentCookies.forEach(cookie => {\n              originCookies.set(cookie.name, cookie);\n            });\n            return originCookies;\n          }\n\n        case 'same-origin':\n          {\n            return originCookies;\n          }\n\n        default:\n          return new Map();\n      }\n    }\n    /**\n     * Returns a collection of all stored cookies.\n     */\n\n\n    getAll() {\n      this.deleteExpiredCookies();\n      return this.store;\n    }\n    /**\n     * Deletes all cookies associated with the given request.\n     */\n\n\n    deleteAll(request) {\n      const requestUrl = new URL(request.url);\n      this.store.delete(requestUrl.origin);\n    }\n    /**\n     * Clears the entire cookie store.\n     */\n\n\n    clear() {\n      this.store.clear();\n    }\n    /**\n     * Hydrates the virtual cookie store from the `localStorage`.\n     */\n\n\n    hydrate() {\n      if (!this.supportsPersistency) {\n        return;\n      }\n\n      const persistedCookies = localStorage.getItem(exports.PERSISTENCY_KEY);\n\n      if (persistedCookies) {\n        try {\n          const parsedCookies = JSON.parse(persistedCookies);\n          parsedCookies.forEach(([origin, cookies]) => {\n            this.store.set(origin, new Map(cookies.map(_a => {\n              var [token, _b] = _a,\n                  {\n                expires\n              } = _b,\n                  cookie = __rest(_b, [\"expires\"]);\n\n              return [token, expires === undefined ? cookie : Object.assign(Object.assign({}, cookie), {\n                expires: new Date(expires)\n              })];\n            })));\n          });\n        } catch (error) {\n          console.warn(`\n[virtual-cookie] Failed to parse a stored cookie from the localStorage (key \"${exports.PERSISTENCY_KEY}\").\n\nStored value:\n${localStorage.getItem(exports.PERSISTENCY_KEY)}\n\nThrown exception:\n${error}\n\nInvalid value has been removed from localStorage to prevent subsequent failed parsing attempts.`);\n          localStorage.removeItem(exports.PERSISTENCY_KEY);\n        }\n      }\n    }\n    /**\n     * Persists the current virtual cookies into the `localStorage`,\n     * so they are available on the next page load.\n     */\n\n\n    persist() {\n      if (!this.supportsPersistency) {\n        return;\n      }\n\n      const serializedCookies = Array.from(this.store.entries()).map(([origin, cookies]) => {\n        return [origin, Array.from(cookies.entries())];\n      });\n      localStorage.setItem(exports.PERSISTENCY_KEY, JSON.stringify(serializedCookies));\n    }\n\n    deleteExpiredCookies() {\n      const now = Date.now();\n      this.store.forEach((originCookies, origin) => {\n        originCookies.forEach(({\n          expires,\n          name\n        }) => {\n          if (expires !== undefined && expires.getTime() <= now) {\n            originCookies.delete(name);\n          }\n        });\n\n        if (originCookies.size === 0) {\n          this.store.delete(origin);\n        }\n      });\n    }\n\n  }\n\n  exports.default = new CookieStore();\n});\nvar lib$1 = createCommonjsModule(function (module, exports) {\n  var __importDefault = commonjsGlobal && commonjsGlobal.__importDefault || function (mod) {\n    return mod && mod.__esModule ? mod : {\n      \"default\": mod\n    };\n  };\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.PERSISTENCY_KEY = exports.store = void 0;\n  Object.defineProperty(exports, \"store\", {\n    enumerable: true,\n    get: function () {\n      return __importDefault(CookieStore_1).default;\n    }\n  });\n  Object.defineProperty(exports, \"PERSISTENCY_KEY\", {\n    enumerable: true,\n    get: function () {\n      return CookieStore_1.PERSISTENCY_KEY;\n    }\n  });\n});\n\nfunction getAllCookies() {\n  return parse_1$1(document.cookie);\n}\n/**\r\n * Returns relevant document cookies based on the request `credentials` option.\r\n */\n\n\nfunction getRequestCookies(request) {\n  /**\r\n   * @note No cookies persist on the document in Node.js: no document.\r\n   */\n  if (typeof location === 'undefined') {\n    return {};\n  }\n\n  switch (request.credentials) {\n    case 'same-origin':\n      {\n        // Return document cookies only when requested a resource\n        // from the same origin as the current document.\n        return location.origin === request.url.origin ? getAllCookies() : {};\n      }\n\n    case 'include':\n      {\n        // Return all document cookies.\n        return getAllCookies();\n      }\n\n    default:\n      {\n        return {};\n      }\n  }\n}\n\nfunction setRequestCookies(request) {\n  var _a;\n\n  lib$1.store.hydrate();\n  request.cookies = Object.assign(Object.assign({}, getRequestCookies(request)), Array.from((_a = lib$1.store.get(Object.assign(Object.assign({}, request), {\n    url: request.url.toString()\n  }))) === null || _a === void 0 ? void 0 : _a.entries()).reduce((cookies, [name, {\n    value\n  }]) => Object.assign(cookies, {\n    [name]: value\n  }), {}));\n  request.headers.set('cookie', Object.entries(request.cookies).map(([name, value]) => `${name}=${value}`).join('; '));\n}\n/**\r\n * Ensures that an empty GET request body is always represented as `undefined`.\r\n */\n\n\nfunction pruneGetRequestBody(request) {\n  if (request.method && isStringEqual(request.method, 'GET') && request.body === '') {\n    return undefined;\n  }\n\n  return request.body;\n}\n\nfunction parseWorkerRequest(rawRequest) {\n  const request = {\n    id: rawRequest.id,\n    cache: rawRequest.cache,\n    credentials: rawRequest.credentials,\n    method: rawRequest.method,\n    url: new URL(rawRequest.url),\n    referrer: rawRequest.referrer,\n    referrerPolicy: rawRequest.referrerPolicy,\n    redirect: rawRequest.redirect,\n    mode: rawRequest.mode,\n    params: {},\n    cookies: {},\n    integrity: rawRequest.integrity,\n    keepalive: rawRequest.keepalive,\n    destination: rawRequest.destination,\n    body: pruneGetRequestBody(rawRequest),\n    bodyUsed: rawRequest.bodyUsed,\n    headers: new lib$2.Headers(rawRequest.headers)\n  }; // Set document cookies on the request.\n\n  setRequestCookies(request); // Parse the request's body based on the \"Content-Type\" header.\n\n  request.body = parseBody(request.body, request.headers);\n  return request;\n}\n\nfunction readResponseCookies(request, response) {\n  lib$1.store.add(Object.assign(Object.assign({}, request), {\n    url: request.url.toString()\n  }), response);\n  lib$1.store.persist();\n}\n\nconst createRequestListener = (context, options) => {\n  return (event, message) => __awaiter(void 0, void 0, void 0, function* () {\n    const channel = createBroadcastChannel(event);\n\n    try {\n      const request = parseWorkerRequest(message.payload);\n      context.emitter.emit('request:start', request); // Set document cookies on the request.\n\n      setRequestCookies(request);\n      const {\n        response,\n        handler,\n        publicRequest,\n        parsedRequest\n      } = yield getResponse(request, context.requestHandlers); // Handle a scenario when there is no request handler\n      // found for a given request.\n\n      if (!handler) {\n        onUnhandledRequest(request, context.requestHandlers, options.onUnhandledRequest);\n        context.emitter.emit('request:unhandled', request);\n        context.emitter.emit('request:end', request);\n        return channel.send({\n          type: 'MOCK_NOT_FOUND'\n        });\n      }\n\n      context.emitter.emit('request:match', request); // Handle a scenario when there is a request handler,\n      // but it doesn't return any mocked response.\n\n      if (!response) {\n        console.warn('[MSW] Expected a mocking resolver function to return a mocked response Object, but got: %s. Original response is going to be used instead.', response);\n        context.emitter.emit('request:end', request);\n        return channel.send({\n          type: 'MOCK_NOT_FOUND'\n        });\n      }\n\n      readResponseCookies(request, response);\n      const responseWithSerializedHeaders = Object.assign(Object.assign({}, response), {\n        headers: lib$2.headersToList(response.headers)\n      });\n\n      if (!options.quiet) {\n        setTimeout(() => {\n          handler.log(publicRequest, responseWithSerializedHeaders, handler, parsedRequest);\n        }, response.delay);\n      }\n\n      context.emitter.emit('request:end', request);\n      channel.send({\n        type: 'MOCK_SUCCESS',\n        payload: responseWithSerializedHeaders\n      });\n    } catch (error) {\n      if (error instanceof NetworkError) {\n        // Treat emulated network error differently,\n        // as it is an intended exception in a request handler.\n        return channel.send({\n          type: 'NETWORK_ERROR',\n          payload: {\n            name: error.name,\n            message: error.message\n          }\n        });\n      } // Treat all the other exceptions in a request handler\n      // as unintended, alerting that there is a problem needs fixing.\n\n\n      channel.send({\n        type: 'INTERNAL_ERROR',\n        payload: {\n          status: 500,\n          body: JSON.stringify({\n            errorType: error.constructor.name,\n            message: error.message,\n            location: error.stack\n          })\n        }\n      });\n    }\n  });\n};\n\nfunction requestIntegrityCheck(context, serviceWorker) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Signal Service Worker to report back its integrity\n    context.workerChannel.send('INTEGRITY_CHECK_REQUEST');\n    const {\n      payload: actualChecksum\n    } = yield context.events.once('INTEGRITY_CHECK_RESPONSE'); // Compare the response from the Service Worker and the\n    // global variable set by webpack upon build.\n\n    if (actualChecksum !== \"82ef9b96d8393b6da34527d1d6e19187\") {\n      throw new Error(`Currently active Service Worker (${actualChecksum}) is behind the latest published one (${\"82ef9b96d8393b6da34527d1d6e19187\"}).`);\n    }\n\n    return serviceWorker;\n  });\n}\n/**\r\n * Intercepts and defers any requests on the page\r\n * until the Service Worker instance is ready.\r\n * Must only be used in a browser.\r\n */\n\n\nfunction deferNetworkRequestsUntil(predicatePromise) {\n  // Defer any `XMLHttpRequest` requests until the Service Worker is ready.\n  const originalXhrSend = window.XMLHttpRequest.prototype.send;\n\n  window.XMLHttpRequest.prototype.send = function (...args) {\n    // Keep this function synchronous to comply with `XMLHttpRequest.prototype.send`,\n    // because that method is always synchronous.\n    until$1(() => predicatePromise).then(() => {\n      window.XMLHttpRequest.prototype.send = originalXhrSend;\n      this.send(...args);\n    });\n  }; // Defer any `fetch` requests until the Service Worker is ready.\n\n\n  const originalFetch = window.fetch;\n\n  window.fetch = (...args) => __awaiter(this, void 0, void 0, function* () {\n    yield until$1(() => predicatePromise);\n    window.fetch = originalFetch;\n    return window.fetch(...args);\n  });\n}\n\nfunction createResponseListener(context) {\n  return (_, message) => {\n    var _a;\n\n    const {\n      payload: responseJson\n    } = message;\n    /**\r\n     * CORS requests with `mode: \"no-cors\"` result in \"opaque\" responses.\r\n     * That kind of responses cannot be manipulated in JavaScript due\r\n     * to the security considerations.\r\n     * @see https://fetch.spec.whatwg.org/#concept-filtered-response-opaque\r\n     * @see https://github.com/mswjs/msw/issues/529\r\n     */\n\n    if ((_a = responseJson.type) === null || _a === void 0 ? void 0 : _a.includes('opaque')) {\n      return;\n    }\n\n    const response = new Response(responseJson.body || null, responseJson);\n    const isMockedResponse = response.headers.get('x-powered-by') === 'msw';\n\n    if (isMockedResponse) {\n      context.emitter.emit('response:mocked', response, responseJson.requestId);\n    } else {\n      context.emitter.emit('response:bypass', response, responseJson.requestId);\n    }\n  };\n}\n\nconst DEFAULT_START_OPTIONS = {\n  serviceWorker: {\n    url: '/mockServiceWorker.js',\n    options: null\n  },\n  quiet: false,\n  waitUntilReady: true,\n  onUnhandledRequest: 'bypass',\n  findWorker: (scriptURL, mockServiceWorkerUrl) => scriptURL === mockServiceWorkerUrl\n};\n\nconst createStart = context => {\n  /**\r\n   * Registers and activates the mock Service Worker.\r\n   */\n  return function start(options) {\n    const resolvedOptions = mergeRight(DEFAULT_START_OPTIONS, options || {}); // Store the start options in the context so that other methods (like `stop`)\n    // could reference them.\n\n    context.startOptions = resolvedOptions;\n\n    const startWorkerInstance = () => __awaiter(this, void 0, void 0, function* () {\n      if (!('serviceWorker' in navigator)) {\n        throw new Error(`[MSW] Failed to register a Service Worker: this browser does not support Service Workers (see https://caniuse.com/serviceworkers), or your application is running on an insecure host (consider using HTTPS for custom hostnames).`);\n      } // Remove all previously existing event listeners.\n      // This way none of the listeners persists between Fast refresh\n      // of the application's code.\n\n\n      context.events.removeAllListeners(); // Handle requests signaled by the worker.\n\n      context.workerChannel.on('REQUEST', createRequestListener(context, resolvedOptions));\n      context.workerChannel.on('RESPONSE', createResponseListener(context));\n      const instance = yield getWorkerInstance(resolvedOptions.serviceWorker.url, resolvedOptions.serviceWorker.options, resolvedOptions.findWorker);\n      const [worker, registration] = instance;\n\n      if (!worker) {\n        const missingWorkerMessage = (options === null || options === void 0 ? void 0 : options.findWorker) ? `[MSW] Failed to locate the Service Worker registration using a custom \"findWorker\" predicate.\n\nPlease ensure that the custom predicate properly locates the Service Worker registration at \"${resolvedOptions.serviceWorker.url}\".\nMore details: https://mswjs.io/docs/api/setup-worker/start#findworker\n` : `[MSW] Failed to locate the Service Worker registration.\n\nThis most likely means that the worker script URL \"${resolvedOptions.serviceWorker.url}\" cannot resolve against the actual public hostname (${location.host}). This may happen if your application runs behind a proxy, or has a dynamic hostname.\n\nPlease consider using a custom \"serviceWorker.url\" option to point to the actual worker script location, or a custom \"findWorker\" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start`;\n        throw new Error(missingWorkerMessage);\n      }\n\n      context.worker = worker;\n      context.registration = registration;\n      context.events.addListener(window, 'beforeunload', () => {\n        if (worker.state !== 'redundant') {\n          // Notify the Service Worker that this client has closed.\n          // Internally, it's similar to disabling the mocking, only\n          // client close event has a handler that self-terminates\n          // the Service Worker when there are no open clients.\n          context.workerChannel.send('CLIENT_CLOSED');\n        } // Make sure we're always clearing the interval - there are reports that not doing this can\n        // cause memory leaks in headless browser environments.\n\n\n        window.clearInterval(context.keepAliveInterval);\n      }); // Check if the active Service Worker is the latest published one\n\n      const [integrityError] = yield until$1(() => requestIntegrityCheck(context, worker));\n\n      if (integrityError) {\n        console.error(`\\\n[MSW] Detected outdated Service Worker: ${integrityError.message}\n\nThe mocking is still enabled, but it's highly recommended that you update your Service Worker by running:\n\n$ npx msw init <PUBLIC_DIR>\n\nThis is necessary to ensure that the Service Worker is in sync with the library to guarantee its stability.\nIf this message still persists after updating, please report an issue: https://github.com/open-draft/msw/issues\\\n      `);\n      } // Signal the Service Worker to enable requests interception\n\n\n      yield activateMocking(context, options).catch(err => {\n        throw new Error(`Failed to enable mocking: ${err === null || err === void 0 ? void 0 : err.message}`);\n      });\n      context.keepAliveInterval = window.setInterval(() => context.workerChannel.send('KEEPALIVE_REQUEST'), 5000);\n      return registration;\n    });\n\n    const workerRegistration = startWorkerInstance(); // Defer any network requests until the Service Worker instance is ready.\n    // This prevents a race condition between the Service Worker registration\n    // and application's runtime requests (i.e. requests on mount).\n\n    if (resolvedOptions.waitUntilReady) {\n      deferNetworkRequestsUntil(workerRegistration);\n    }\n\n    return workerRegistration;\n  };\n};\n\nconst createStop = context => {\n  /**\r\n   * Signal the Service Worker to disable mocking for this client.\r\n   * Use this an an explicit way to stop the mocking, while preserving\r\n   * the worker-client relation. Does not affect the worker's lifecycle.\r\n   */\n  return function stop() {\n    var _a;\n\n    context.workerChannel.send('MOCK_DEACTIVATE');\n    context.events.removeAllListeners();\n    context.emitter.removeAllListeners();\n    window.clearInterval(context.keepAliveInterval);\n\n    if (!((_a = context.startOptions) === null || _a === void 0 ? void 0 : _a.quiet)) {\n      console.log('%c[MSW] Mocking disabled.', 'color:orangered;font-weight:bold;');\n    }\n  };\n};\n\nfunction use(currentHandlers, ...handlers) {\n  currentHandlers.unshift(...handlers);\n}\n\nfunction restoreHandlers(handlers) {\n  handlers.forEach(handler => {\n    handler.markAsSkipped(false);\n  });\n}\n\nfunction resetHandlers(initialHandlers, ...nextHandlers) {\n  return nextHandlers.length > 0 ? [...nextHandlers] : [...initialHandlers];\n} // Declare the list of event handlers on the module's scope\n// so it persists between Fash refreshes of the application's code.\n\n\nlet listeners = [];\n/**\r\n * Creates a new mock Service Worker registration\r\n * with the given request handlers.\r\n * @param {RequestHandler[]} requestHandlers List of request handlers\r\n * @see {@link https://mswjs.io/docs/api/setup-worker `setupWorker`}\r\n */\n\nfunction setupWorker(...requestHandlers) {\n  requestHandlers.forEach(handler => {\n    if (Array.isArray(handler)) throw new Error(`[MSW] Failed to call \"setupWorker\" given an Array of request handlers (setupWorker([a, b])), expected to receive each handler individually: setupWorker(a, b).`);\n  });\n  const context = {\n    startOptions: undefined,\n    worker: null,\n    registration: null,\n    requestHandlers: [...requestHandlers],\n    emitter: new lib.StrictEventEmitter(),\n    workerChannel: {\n      on(eventType, callback) {\n        context.events.addListener(navigator.serviceWorker, 'message', event => {\n          // Avoid messages broadcasted from unrelated workers.\n          if (event.source !== context.worker) {\n            return;\n          }\n\n          const message = jsonParse(event.data);\n\n          if (!message) {\n            return;\n          }\n\n          if (message.type === eventType) {\n            callback(event, message);\n          }\n        });\n      },\n\n      send(type) {\n        var _a;\n\n        (_a = context.worker) === null || _a === void 0 ? void 0 : _a.postMessage(type);\n      }\n\n    },\n    events: {\n      addListener(target, eventType, callback) {\n        target.addEventListener(eventType, callback);\n        listeners.push({\n          eventType,\n          target,\n          callback\n        });\n        return () => {\n          target.removeEventListener(eventType, callback);\n        };\n      },\n\n      removeAllListeners() {\n        for (const {\n          target,\n          eventType,\n          callback\n        } of listeners) {\n          target.removeEventListener(eventType, callback);\n        }\n\n        listeners = [];\n      },\n\n      once(eventType) {\n        const bindings = [];\n        return new Promise((resolve, reject) => {\n          const handleIncomingMessage = event => {\n            try {\n              const message = JSON.parse(event.data);\n\n              if (message.type === eventType) {\n                resolve(message);\n              }\n            } catch (error) {\n              reject(error);\n            }\n          };\n\n          bindings.push(context.events.addListener(navigator.serviceWorker, 'message', handleIncomingMessage), context.events.addListener(navigator.serviceWorker, 'messageerror', reject));\n        }).finally(() => {\n          bindings.forEach(unbind => unbind());\n        });\n      }\n\n    }\n  }; // Error when attempting to run this function in a Node.js environment.\n\n  if (isNodeProcess()) {\n    throw new Error('[MSW] Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.');\n  }\n\n  return {\n    start: createStart(context),\n    stop: createStop(context),\n\n    use(...handlers) {\n      console.log('adding new handlers', handlers);\n      use(context.requestHandlers, ...handlers);\n    },\n\n    restoreHandlers() {\n      restoreHandlers(context.requestHandlers);\n    },\n\n    resetHandlers(...nextHandlers) {\n      context.requestHandlers = resetHandlers(requestHandlers, ...nextHandlers);\n    },\n\n    printHandlers() {\n      context.requestHandlers.forEach(handler => {\n        const {\n          header,\n          callFrame\n        } = handler.info;\n        const pragma = handler.info.hasOwnProperty('operationType') ? '[graphql]' : '[rest]';\n        console.groupCollapsed(`${pragma} ${header}`);\n\n        if (callFrame) {\n          console.log(`Declaration: ${callFrame}`);\n        }\n\n        console.log('Handler:', handler);\n\n        if (handler instanceof RestHandler) {\n          console.log('Match:', `https://mswjs.io/repl?path=${handler.info.mask}`);\n        }\n\n        console.groupEnd();\n      });\n    },\n\n    on(eventType, listener) {\n      context.emitter.addListener(eventType, listener);\n    }\n\n  };\n}\n\nexport { setupWorker };","map":{"version":3,"sources":["C:/Code/Projects/codecademy/react_apps/adopt-a-pet-starter/node_modules/msw/lib/esm/index.js"],"names":["i","context","c","createCommonjsModule","a","commonjsGlobal","l","lib$2","j","jsonParse","isNodeProcess","_","__awaiter","g","getPublicUrlFromRequest","p","parseBody","N","NetworkError","R","RequestHandler","b","compose","createResponseComposition","defaultContext","d","defaultResponse","m","matchRequestUrl","r","response","parseGraphQLRequest","G","GraphQLHandler","graphql","graphqlContext","RestHandler","isStringEqual","RESTMethods","rest","restContext","parse_1$1","mergeRight","Reflect","ReflectApply","apply","target","receiver","args","Function","prototype","call","ReflectOwnKeys","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","ProcessEmitWarning","warning","console","warn","NumberIsNaN","Number","isNaN","value","EventEmitter","init","events","once_1","once","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","defineProperty","enumerable","get","set","arg","RangeError","getPrototypeOf","create","setMaxListeners","n","_getMaxListeners","that","getMaxListeners","emit","type","arguments","length","push","doError","error","er","Error","err","message","handler","len","listeners","arrayClone","_addListener","prepend","existing","newListener","unshift","warned","w","String","name","emitter","count","addListener","on","prependListener","onceWrapper","fired","removeListener","wrapFn","_onceWrap","state","wrapped","bind","prependOnceListener","list","position","originalListener","shift","spliceOne","off","removeAllListeners","keys","key","_listeners","unwrap","evlistener","unwrapListeners","rawListeners","listenerCount","eventNames","arr","copy","Array","index","pop","ret","Promise","resolve","reject","errorListener","resolver","slice","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","addEventListener","wrapListener","removeEventListener","StrictEventEmitter_1","module","exports","__extends","extendStatics","setPrototypeOf","__proto__","hasOwnProperty","__","constructor","__spreadArrays","s","il","k","jl","__esModule","StrictEventEmitter","_super","event","toString","data","_i","lib","__createBinding","o","k2","until_1","promise","catch","until","until$1","getWorkerByRegistration","registration","absoluteWorkerUrl","findWorker","allStates","active","installing","waiting","existingStates","filter","Boolean","mockWorker","find","worker","scriptURL","getAbsoluteWorkerUrl","relativeUrl","URL","location","origin","href","getWorkerInstance","url","options","mockRegistrations","navigator","serviceWorker","getRegistrations","then","registrations","controller","reload","existingRegistration","update","instance","register","isWorkerMissing","includes","scopeUrl","scope","activateMocking","workerChannel","send","quiet","groupCollapsed","log","groupEnd","createBroadcastChannel","port","ports","postMessage","getResponse","request","handlers","relevantHandlers","test","result","reduce","acc","previousResults","run","shouldSkip","parsedResult","markAsSkipped","publicRequest","parsedRequest","jsLevenshtein","_min","d0","d1","d2","bx","ay","tmp","la","lb","charCodeAt","offset","x","y","d3","dd","dy","bx0","bx1","bx2","bx3","vector","MAX_MATCH_SCORE","MAX_SUGGESTION_COUNT","TYPE_MATCH_DELTA","groupHandlersByType","groups","getScoreForRestHandler","mask","method","info","RegExp","Infinity","hasSameMethod","methodScoreDelta","requestPublicUrl","score","getScoreForGraphQLHandler","parsedQuery","operationName","operationType","hasSameOperationType","operationTypeScoreDelta","getSuggestedHandler","getScore","suggestedHandlers","sort","leftScore","rightScore","map","getSuggestedHandlersMessage","header","join","onUnhandledRequest","strategy","parsedGraphQLQuery","handlerGroups","handlerSuggestion","publicUrl","requestHeader","messageTemplate","defaultParseOptions","decodeValues","silent","isNonEmptyString","str","trim","parseString","setCookieValue","parts","split","nameValue","assign","decodeURIComponent","e","cookie","forEach","part","sides","trimLeft","toLowerCase","expires","Date","maxAge","parseInt","secure","httpOnly","sameSite","parse","input","headers","sch","isArray","cookies","splitCookiesString","cookiesString","cookiesStrings","pos","start","ch","lastComma","nextStart","cookiesSeparatorFound","skipWhitespace","charAt","notSpecialChar","substring","setCookie","parse_1","parseString_1","splitCookiesString_1","CookieStore_1","__rest","t","indexOf","propertyIsEnumerable","PERSISTENCY_KEY","CookieStore","store","Map","supportsPersistency","window","add","credentials","requestUrl","responseCookies","now","parsedResponseCookies","_a","getTime","prevCookies","deleteExpiredCookies","originCookies","documentCookies","document","getAll","deleteAll","delete","clear","hydrate","persistedCookies","localStorage","getItem","parsedCookies","JSON","token","_b","removeItem","persist","serializedCookies","from","entries","setItem","stringify","size","default","lib$1","__importDefault","mod","getAllCookies","getRequestCookies","setRequestCookies","pruneGetRequestBody","body","parseWorkerRequest","rawRequest","id","cache","referrer","referrerPolicy","redirect","mode","params","integrity","keepalive","destination","bodyUsed","Headers","readResponseCookies","createRequestListener","channel","payload","requestHandlers","responseWithSerializedHeaders","headersToList","setTimeout","delay","status","errorType","stack","requestIntegrityCheck","actualChecksum","deferNetworkRequestsUntil","predicatePromise","originalXhrSend","XMLHttpRequest","originalFetch","fetch","createResponseListener","responseJson","Response","isMockedResponse","requestId","DEFAULT_START_OPTIONS","waitUntilReady","mockServiceWorkerUrl","createStart","resolvedOptions","startOptions","startWorkerInstance","missingWorkerMessage","host","clearInterval","keepAliveInterval","integrityError","setInterval","workerRegistration","createStop","stop","use","currentHandlers","restoreHandlers","resetHandlers","initialHandlers","nextHandlers","setupWorker","eventType","callback","source","bindings","handleIncomingMessage","finally","unbind","printHandlers","callFrame","pragma"],"mappings":"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","sourcesContent":["export { i as context } from './index-deps.js';\nimport { c as createCommonjsModule, a as commonjsGlobal, l as lib$2, j as jsonParse, i as isNodeProcess } from './fetch-deps.js';\nimport { _ as __awaiter, g as getPublicUrlFromRequest, p as parseBody, N as NetworkError } from './RequestHandler-deps.js';\nexport { R as RequestHandler, b as compose, c as createResponseComposition, a as defaultContext, d as defaultResponse, m as matchRequestUrl, r as response } from './RequestHandler-deps.js';\nimport { p as parseGraphQLRequest, G as GraphQLHandler } from './graphql-deps.js';\nexport { G as GraphQLHandler, g as graphql, a as graphqlContext } from './graphql-deps.js';\nimport { R as RestHandler, i as isStringEqual } from './rest-deps.js';\nexport { a as RESTMethods, R as RestHandler, r as rest, b as restContext } from './rest-deps.js';\nimport { p as parse_1$1 } from './xml-deps.js';\nimport { m as mergeRight } from './errors-deps.js';\n\n// Copyright Joyent, Inc. and other Node contributors.\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  };\n\nvar ReflectOwnKeys;\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nvar events = EventEmitter;\nvar once_1 = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    }\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\nevents.once = once_1;\n\nvar StrictEventEmitter_1 = createCommonjsModule(function (module, exports) {\nvar __extends = (commonjsGlobal && commonjsGlobal.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (commonjsGlobal && commonjsGlobal.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nexports.__esModule = true;\nexports.StrictEventEmitter = void 0;\n\nvar StrictEventEmitter = /** @class */ (function (_super) {\n    __extends(StrictEventEmitter, _super);\n    function StrictEventEmitter() {\n        return _super.call(this) || this;\n    }\n    StrictEventEmitter.prototype.on = function (event, listener) {\n        return _super.prototype.on.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.once = function (event, listener) {\n        return _super.prototype.on.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.off = function (event, listener) {\n        return _super.prototype.off.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.emit = function (event) {\n        var data = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            data[_i - 1] = arguments[_i];\n        }\n        return _super.prototype.emit.apply(this, __spreadArrays([event.toString()], data));\n    };\n    StrictEventEmitter.prototype.addListener = function (event, listener) {\n        return _super.prototype.addListener.call(this, event.toString(), listener);\n    };\n    StrictEventEmitter.prototype.removeListener = function (event, listener) {\n        return _super.prototype.removeListener.call(this, event.toString(), listener);\n    };\n    return StrictEventEmitter;\n}(events.EventEmitter));\nexports.StrictEventEmitter = StrictEventEmitter;\n});\n\nvar lib = createCommonjsModule(function (module, exports) {\nvar __createBinding = (commonjsGlobal && commonjsGlobal.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.StrictEventEmitter = void 0;\n\n__createBinding(exports, StrictEventEmitter_1, \"StrictEventEmitter\");\n});\n\n/**\n * Gracefully handles a given Promise factory.\n * @example\n * cosnt [error, data] = await until(() => asyncAction())\n */\nvar until_1 = async (promise) => {\n    try {\n        const data = await promise().catch((error) => {\n            throw error;\n        });\n        return [null, data];\n    }\n    catch (error) {\n        return [error, null];\n    }\n};\n\nvar until = /*#__PURE__*/Object.defineProperty({\n\tuntil: until_1\n}, '__esModule', {value: true});\n\nvar until$1 = until.until;\n\n/**\r\n * Attempts to resolve a Service Worker instance from a given registration,\r\n * regardless of its state (active, installing, waiting).\r\n */\r\nconst getWorkerByRegistration = (registration, absoluteWorkerUrl, findWorker) => {\r\n    const allStates = [\r\n        registration.active,\r\n        registration.installing,\r\n        registration.waiting,\r\n    ];\r\n    const existingStates = allStates.filter(Boolean);\r\n    const mockWorker = existingStates.find((worker) => {\r\n        return findWorker(worker.scriptURL, absoluteWorkerUrl);\r\n    });\r\n    return mockWorker || null;\r\n};\n\n/**\r\n * Returns an absolute Service Worker URL based on the given\r\n * relative URL (known during the registration).\r\n */\r\nfunction getAbsoluteWorkerUrl(relativeUrl) {\r\n    return new URL(relativeUrl, location.origin).href;\r\n}\n\n/**\r\n * Returns an active Service Worker instance.\r\n * When not found, registers a new Service Worker.\r\n */\r\nconst getWorkerInstance = (url, options = {}, findWorker) => __awaiter(void 0, void 0, void 0, function* () {\r\n    // Resolve the absolute Service Worker URL.\r\n    const absoluteWorkerUrl = getAbsoluteWorkerUrl(url);\r\n    const mockRegistrations = yield navigator.serviceWorker\r\n        .getRegistrations()\r\n        .then((registrations) => registrations.filter((registration) => getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker)));\r\n    if (!navigator.serviceWorker.controller && mockRegistrations.length > 0) {\r\n        // Reload the page when it has associated workers, but no active controller.\r\n        // The absence of a controller can mean either:\r\n        // - page has no Service Worker associated with it\r\n        // - page has been hard-reloaded and its workers won't be used until the next reload.\r\n        // Since we've checked that there are registrations associated with this page,\r\n        // at this point we are sure it's hard reload that falls into this clause.\r\n        location.reload();\r\n    }\r\n    const [existingRegistration] = mockRegistrations;\r\n    if (existingRegistration) {\r\n        // When the Service Worker is registered, update it and return the reference.\r\n        return existingRegistration.update().then(() => {\r\n            return [\r\n                getWorkerByRegistration(existingRegistration, absoluteWorkerUrl, findWorker),\r\n                existingRegistration,\r\n            ];\r\n        });\r\n    }\r\n    // When the Service Worker wasn't found, register it anew and return the reference.\r\n    const [error, instance] = yield until$1(() => __awaiter(void 0, void 0, void 0, function* () {\r\n        const registration = yield navigator.serviceWorker.register(url, options);\r\n        return [\r\n            // Compare existing worker registration by its worker URL,\r\n            // to prevent irrelevant workers to resolve here (such as Codesandbox worker).\r\n            getWorkerByRegistration(registration, absoluteWorkerUrl, findWorker),\r\n            registration,\r\n        ];\r\n    }));\r\n    // Handle Service Worker registration errors.\r\n    if (error) {\r\n        const isWorkerMissing = error.message.includes('(404)');\r\n        // Produce a custom error message when given a non-existing Service Worker url.\r\n        // Suggest developers to check their setup.\r\n        if (isWorkerMissing) {\r\n            const scopeUrl = new URL((options === null || options === void 0 ? void 0 : options.scope) || '/', location.href);\r\n            throw new Error(`[MSW] Failed to register a Service Worker for scope ('${scopeUrl.href}') with script ('${absoluteWorkerUrl}'): Service Worker script does not exist at the given path.\n\nDid you forget to run \"npx msw init <PUBLIC_DIR>\"?\n\nLearn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`);\r\n        }\r\n        // Fallback error message for any other registration errors.\r\n        throw new Error(`[MSW] Failed to register a Service Worker:\\n\\n${error.message}`);\r\n    }\r\n    return instance;\r\n});\n\nconst activateMocking = (context, options) => __awaiter(void 0, void 0, void 0, function* () {\r\n    context.workerChannel.send('MOCK_ACTIVATE');\r\n    return context.events.once('MOCKING_ENABLED').then(() => {\r\n        if (!(options === null || options === void 0 ? void 0 : options.quiet)) {\r\n            console.groupCollapsed('%c[MSW] Mocking enabled.', 'color:orangered;font-weight:bold;');\r\n            console.log('%cDocumentation: %chttps://mswjs.io/docs', 'font-weight:bold', 'font-weight:normal');\r\n            console.log('Found an issue? https://github.com/mswjs/msw/issues');\r\n            console.groupEnd();\r\n        }\r\n    });\r\n});\n\n/**\r\n * Creates a communication channel between the client\r\n * and the Service Worker associated with the given event.\r\n */\r\nconst createBroadcastChannel = (event) => {\r\n    const port = event.ports[0];\r\n    return {\r\n        /**\r\n         * Sends a text message to the connected Service Worker.\r\n         */\r\n        send(message) {\r\n            if (port) {\r\n                port.postMessage(message);\r\n            }\r\n        },\r\n    };\r\n};\n\n/**\r\n * Returns a mocked response for a given request using following request handlers.\r\n */\r\nconst getResponse = (request, handlers) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const relevantHandlers = handlers.filter((handler) => {\r\n        return handler.test(request);\r\n    });\r\n    if (relevantHandlers.length === 0) {\r\n        return {\r\n            handler: undefined,\r\n            response: undefined,\r\n        };\r\n    }\r\n    const result = yield relevantHandlers.reduce((acc, handler) => __awaiter(void 0, void 0, void 0, function* () {\r\n        const previousResults = yield acc;\r\n        if (!!(previousResults === null || previousResults === void 0 ? void 0 : previousResults.response)) {\r\n            return acc;\r\n        }\r\n        const result = yield handler.run(request);\r\n        if (result === null || result.handler.shouldSkip) {\r\n            return null;\r\n        }\r\n        if (!result.response) {\r\n            return {\r\n                request: result.request,\r\n                handler: result.handler,\r\n                response: undefined,\r\n                parsedResult: result.parsedResult,\r\n            };\r\n        }\r\n        if (result.response.once) {\r\n            handler.markAsSkipped(true);\r\n        }\r\n        return result;\r\n    }), Promise.resolve(null));\r\n    // Although reducing a list of relevant request handlers, it's possible\r\n    // that in the end there will be no handler associted with the request\r\n    // (i.e. if relevant handlers are fall-through).\r\n    if (!result) {\r\n        return {\r\n            handler: undefined,\r\n            response: undefined,\r\n        };\r\n    }\r\n    return {\r\n        handler: result.handler,\r\n        publicRequest: result.request,\r\n        parsedRequest: result.parsedResult,\r\n        response: result.response,\r\n    };\r\n});\n\nvar jsLevenshtein = (function()\n{\n  function _min(d0, d1, d2, bx, ay)\n  {\n    return d0 < d1 || d2 < d1\n        ? d0 > d2\n            ? d2 + 1\n            : d0 + 1\n        : bx === ay\n            ? d1\n            : d1 + 1;\n  }\n\n  return function(a, b)\n  {\n    if (a === b) {\n      return 0;\n    }\n\n    if (a.length > b.length) {\n      var tmp = a;\n      a = b;\n      b = tmp;\n    }\n\n    var la = a.length;\n    var lb = b.length;\n\n    while (la > 0 && (a.charCodeAt(la - 1) === b.charCodeAt(lb - 1))) {\n      la--;\n      lb--;\n    }\n\n    var offset = 0;\n\n    while (offset < la && (a.charCodeAt(offset) === b.charCodeAt(offset))) {\n      offset++;\n    }\n\n    la -= offset;\n    lb -= offset;\n\n    if (la === 0 || lb < 3) {\n      return lb;\n    }\n\n    var x = 0;\n    var y;\n    var d0;\n    var d1;\n    var d2;\n    var d3;\n    var dd;\n    var dy;\n    var ay;\n    var bx0;\n    var bx1;\n    var bx2;\n    var bx3;\n\n    var vector = [];\n\n    for (y = 0; y < la; y++) {\n      vector.push(y + 1);\n      vector.push(a.charCodeAt(offset + y));\n    }\n\n    var len = vector.length - 1;\n\n    for (; x < lb - 3;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      bx1 = b.charCodeAt(offset + (d1 = x + 1));\n      bx2 = b.charCodeAt(offset + (d2 = x + 2));\n      bx3 = b.charCodeAt(offset + (d3 = x + 3));\n      dd = (x += 4);\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        ay = vector[y + 1];\n        d0 = _min(dy, d0, d1, bx0, ay);\n        d1 = _min(d0, d1, d2, bx1, ay);\n        d2 = _min(d1, d2, d3, bx2, ay);\n        dd = _min(d2, d3, dd, bx3, ay);\n        vector[y] = dd;\n        d3 = d2;\n        d2 = d1;\n        d1 = d0;\n        d0 = dy;\n      }\n    }\n\n    for (; x < lb;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      dd = ++x;\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        vector[y] = dd = _min(dy, d0, dd, bx0, vector[y + 1]);\n        d0 = dy;\n      }\n    }\n\n    return dd;\n  };\n})();\n\nconst MAX_MATCH_SCORE = 3;\r\nconst MAX_SUGGESTION_COUNT = 4;\r\nconst TYPE_MATCH_DELTA = 0.5;\r\nfunction groupHandlersByType(handlers) {\r\n    return handlers.reduce((groups, handler) => {\r\n        if (handler instanceof RestHandler) {\r\n            groups.rest.push(handler);\r\n        }\r\n        if (handler instanceof GraphQLHandler) {\r\n            groups.graphql.push(handler);\r\n        }\r\n        return groups;\r\n    }, {\r\n        rest: [],\r\n        graphql: [],\r\n    });\r\n}\r\nfunction getScoreForRestHandler() {\r\n    return (request, handler) => {\r\n        const { mask, method } = handler.info;\r\n        if (mask instanceof RegExp) {\r\n            return Infinity;\r\n        }\r\n        const hasSameMethod = isStringEqual(request.method, method);\r\n        // Always treat a handler with the same method as a more similar one.\r\n        const methodScoreDelta = hasSameMethod ? TYPE_MATCH_DELTA : 0;\r\n        const requestPublicUrl = getPublicUrlFromRequest(request);\r\n        const score = jsLevenshtein(requestPublicUrl, mask);\r\n        return score - methodScoreDelta;\r\n    };\r\n}\r\nfunction getScoreForGraphQLHandler(parsedQuery) {\r\n    return (_, handler) => {\r\n        if (typeof parsedQuery.operationName === 'undefined') {\r\n            return Infinity;\r\n        }\r\n        const { operationType, operationName } = handler.info;\r\n        const hasSameOperationType = parsedQuery.operationType === operationType;\r\n        // Always treat a handler with the same operation type as a more similar one.\r\n        const operationTypeScoreDelta = hasSameOperationType ? TYPE_MATCH_DELTA : 0;\r\n        const score = jsLevenshtein(parsedQuery.operationName, operationName);\r\n        return score - operationTypeScoreDelta;\r\n    };\r\n}\r\nfunction getSuggestedHandler(request, handlers, getScore) {\r\n    const suggestedHandlers = handlers\r\n        .reduce((acc, handler) => {\r\n        const score = getScore(request, handler);\r\n        return acc.concat([[score, handler]]);\r\n    }, [])\r\n        .sort(([leftScore], [rightScore]) => {\r\n        return leftScore - rightScore;\r\n    })\r\n        .filter(([score]) => {\r\n        return score <= MAX_MATCH_SCORE;\r\n    })\r\n        .slice(0, MAX_SUGGESTION_COUNT)\r\n        .map(([, handler]) => handler);\r\n    return suggestedHandlers;\r\n}\r\nfunction getSuggestedHandlersMessage(handlers) {\r\n    if (handlers.length > 1) {\r\n        return `\\\nDid you mean to request one of the following resources instead?\n\n${handlers.map((handler) => `  • ${handler.info.header}`).join('\\n')}`;\r\n    }\r\n    return `Did you mean to request \"${handlers[0].info.header}\" instead?`;\r\n}\r\nfunction onUnhandledRequest(request, handlers, strategy = 'bypass') {\r\n    if (typeof strategy === 'function') {\r\n        strategy(request);\r\n        return;\r\n    }\r\n    const parsedGraphQLQuery = parseGraphQLRequest(request);\r\n    const handlerGroups = groupHandlersByType(handlers);\r\n    const relevantHandlers = parsedGraphQLQuery\r\n        ? handlerGroups.graphql\r\n        : handlerGroups.rest;\r\n    const suggestedHandlers = getSuggestedHandler(request, relevantHandlers, parsedGraphQLQuery\r\n        ? getScoreForGraphQLHandler(parsedGraphQLQuery)\r\n        : getScoreForRestHandler());\r\n    const handlerSuggestion = suggestedHandlers.length > 0\r\n        ? getSuggestedHandlersMessage(suggestedHandlers)\r\n        : '';\r\n    const publicUrl = getPublicUrlFromRequest(request);\r\n    const requestHeader = parsedGraphQLQuery\r\n        ? `${parsedGraphQLQuery.operationType} ${parsedGraphQLQuery.operationName} (${request.method} ${publicUrl})`\r\n        : `${request.method} ${publicUrl}`;\r\n    const messageTemplate = [\r\n        `captured a request without a matching request handler:`,\r\n        `  • ${requestHeader}`,\r\n        handlerSuggestion,\r\n        `\\\nIf you still wish to intercept this unhandled request, please create a request handler for it.\nRead more: https://mswjs.io/docs/getting-started/mocks\\\n`,\r\n    ].filter(Boolean);\r\n    const message = messageTemplate.join('\\n\\n');\r\n    switch (strategy) {\r\n        case 'error': {\r\n            console.error(`[MSW] Error: ${message}`);\r\n            break;\r\n        }\r\n        case 'warn': {\r\n            console.warn(`[MSW] Warning: ${message}`);\r\n            break;\r\n        }\r\n        default:\r\n            return;\r\n    }\r\n}\n\nvar defaultParseOptions = {\n  decodeValues: true,\n  map: false,\n  silent: false,\n};\n\nfunction isNonEmptyString(str) {\n  return typeof str === \"string\" && !!str.trim();\n}\n\nfunction parseString(setCookieValue, options) {\n  var parts = setCookieValue.split(\";\").filter(isNonEmptyString);\n  var nameValue = parts.shift().split(\"=\");\n  var name = nameValue.shift();\n  var value = nameValue.join(\"=\"); // everything after the first =, joined by a \"=\" if there was more than one part\n\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  try {\n    value = options.decodeValues ? decodeURIComponent(value) : value; // decode cookie value\n  } catch (e) {\n    console.error(\n      \"set-cookie-parser encountered an error while decoding a cookie with value '\" +\n        value +\n        \"'. Set options.decodeValues to false to disable this feature.\",\n      e\n    );\n  }\n\n  var cookie = {\n    name: name, // grab everything before the first =\n    value: value,\n  };\n\n  parts.forEach(function (part) {\n    var sides = part.split(\"=\");\n    var key = sides.shift().trimLeft().toLowerCase();\n    var value = sides.join(\"=\");\n    if (key === \"expires\") {\n      cookie.expires = new Date(value);\n    } else if (key === \"max-age\") {\n      cookie.maxAge = parseInt(value, 10);\n    } else if (key === \"secure\") {\n      cookie.secure = true;\n    } else if (key === \"httponly\") {\n      cookie.httpOnly = true;\n    } else if (key === \"samesite\") {\n      cookie.sameSite = value;\n    } else {\n      cookie[key] = value;\n    }\n  });\n\n  return cookie;\n}\n\nfunction parse(input, options) {\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  if (!input) {\n    if (!options.map) {\n      return [];\n    } else {\n      return {};\n    }\n  }\n\n  if (input.headers && input.headers[\"set-cookie\"]) {\n    // fast-path for node.js (which automatically normalizes header names to lower-case\n    input = input.headers[\"set-cookie\"];\n  } else if (input.headers) {\n    // slow-path for other environments - see #25\n    var sch =\n      input.headers[\n        Object.keys(input.headers).find(function (key) {\n          return key.toLowerCase() === \"set-cookie\";\n        })\n      ];\n    // warn if called on a request-like object with a cookie header rather than a set-cookie header - see #34, 36\n    if (!sch && input.headers.cookie && !options.silent) {\n      console.warn(\n        \"Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning.\"\n      );\n    }\n    input = sch;\n  }\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n\n  options = options\n    ? Object.assign({}, defaultParseOptions, options)\n    : defaultParseOptions;\n\n  if (!options.map) {\n    return input.filter(isNonEmptyString).map(function (str) {\n      return parseString(str, options);\n    });\n  } else {\n    var cookies = {};\n    return input.filter(isNonEmptyString).reduce(function (cookies, str) {\n      var cookie = parseString(str, options);\n      cookies[cookie.name] = cookie;\n      return cookies;\n    }, cookies);\n  }\n}\n\n/*\n  Set-Cookie header field-values are sometimes comma joined in one string. This splits them without choking on commas\n  that are within a single set-cookie field-value, such as in the Expires portion.\n\n  This is uncommon, but explicitly allowed - see https://tools.ietf.org/html/rfc2616#section-4.2\n  Node.js does this for every header *except* set-cookie - see https://github.com/nodejs/node/blob/d5e363b77ebaf1caf67cd7528224b651c86815c1/lib/_http_incoming.js#L128\n  React Native's fetch does this for *every* header, including set-cookie.\n\n  Based on: https://github.com/google/j2objc/commit/16820fdbc8f76ca0c33472810ce0cb03d20efe25\n  Credits to: https://github.com/tomball for original and https://github.com/chrusart for JavaScript implementation\n*/\nfunction splitCookiesString(cookiesString) {\n  if (Array.isArray(cookiesString)) {\n    return cookiesString;\n  }\n  if (typeof cookiesString !== \"string\") {\n    return [];\n  }\n\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        // ',' is a cookie separator if we have later first '=', not ';' or ','\n        lastComma = pos;\n        pos += 1;\n\n        skipWhitespace();\n        nextStart = pos;\n\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n\n        // currently special character\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          // we found cookies separator\n          cookiesSeparatorFound = true;\n          // pos is inside the next cookie, so back up and return it.\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          // in param ',' or param separator ';',\n          // we continue from that comma\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n\n  return cookiesStrings;\n}\n\nvar setCookie = parse;\nvar parse_1 = parse;\nvar parseString_1 = parseString;\nvar splitCookiesString_1 = splitCookiesString;\nsetCookie.parse = parse_1;\nsetCookie.parseString = parseString_1;\nsetCookie.splitCookiesString = splitCookiesString_1;\n\nvar CookieStore_1 = createCommonjsModule(function (module, exports) {\nvar __rest = (commonjsGlobal && commonjsGlobal.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PERSISTENCY_KEY = void 0;\n\nexports.PERSISTENCY_KEY = 'MSW_COOKIE_STORE';\nclass CookieStore {\n    constructor() {\n        this.store = new Map();\n        this.supportsPersistency = typeof window !== 'undefined';\n    }\n    /**\n     * Sets the given request cookies into the store.\n     * Respects the `request.credentials` policy.\n     */\n    add(request, response) {\n        if (request.credentials === 'omit') {\n            return;\n        }\n        const requestUrl = new URL(request.url);\n        const responseCookies = response.headers.get('set-cookie');\n        if (!responseCookies) {\n            return;\n        }\n        const now = Date.now();\n        const parsedResponseCookies = setCookie.parse(responseCookies).map((_a) => {\n            var { maxAge } = _a, cookie = __rest(_a, [\"maxAge\"]);\n            return (Object.assign(Object.assign({}, cookie), { expires: maxAge === undefined\n                    ? cookie.expires\n                    : new Date(now + maxAge * 1000), maxAge }));\n        }).filter(({ expires }) => expires === undefined || expires.getTime() > now);\n        const prevCookies = this.store.get(requestUrl.origin) || new Map();\n        parsedResponseCookies.forEach((cookie) => {\n            this.store.set(requestUrl.origin, prevCookies.set(cookie.name, cookie));\n        });\n    }\n    /**\n     * Returns cookies relevant to the given request\n     * and its `request.credentials` policy.\n     */\n    get(request) {\n        this.deleteExpiredCookies();\n        const requestUrl = new URL(request.url);\n        const originCookies = this.store.get(requestUrl.origin) || new Map();\n        switch (request.credentials) {\n            case 'include': {\n                const documentCookies = setCookie.parse(document.cookie);\n                documentCookies.forEach((cookie) => {\n                    originCookies.set(cookie.name, cookie);\n                });\n                return originCookies;\n            }\n            case 'same-origin': {\n                return originCookies;\n            }\n            default:\n                return new Map();\n        }\n    }\n    /**\n     * Returns a collection of all stored cookies.\n     */\n    getAll() {\n        this.deleteExpiredCookies();\n        return this.store;\n    }\n    /**\n     * Deletes all cookies associated with the given request.\n     */\n    deleteAll(request) {\n        const requestUrl = new URL(request.url);\n        this.store.delete(requestUrl.origin);\n    }\n    /**\n     * Clears the entire cookie store.\n     */\n    clear() {\n        this.store.clear();\n    }\n    /**\n     * Hydrates the virtual cookie store from the `localStorage`.\n     */\n    hydrate() {\n        if (!this.supportsPersistency) {\n            return;\n        }\n        const persistedCookies = localStorage.getItem(exports.PERSISTENCY_KEY);\n        if (persistedCookies) {\n            try {\n                const parsedCookies = JSON.parse(persistedCookies);\n                parsedCookies.forEach(([origin, cookies]) => {\n                    this.store.set(origin, new Map(cookies.map((_a) => {\n                        var [token, _b] = _a, { expires } = _b, cookie = __rest(_b, [\"expires\"]);\n                        return [\n                            token,\n                            expires === undefined ? cookie : Object.assign(Object.assign({}, cookie), { expires: new Date(expires) })\n                        ];\n                    })));\n                });\n            }\n            catch (error) {\n                console.warn(`\n[virtual-cookie] Failed to parse a stored cookie from the localStorage (key \"${exports.PERSISTENCY_KEY}\").\n\nStored value:\n${localStorage.getItem(exports.PERSISTENCY_KEY)}\n\nThrown exception:\n${error}\n\nInvalid value has been removed from localStorage to prevent subsequent failed parsing attempts.`);\n                localStorage.removeItem(exports.PERSISTENCY_KEY);\n            }\n        }\n    }\n    /**\n     * Persists the current virtual cookies into the `localStorage`,\n     * so they are available on the next page load.\n     */\n    persist() {\n        if (!this.supportsPersistency) {\n            return;\n        }\n        const serializedCookies = Array.from(this.store.entries()).map(([origin, cookies]) => {\n            return [origin, Array.from(cookies.entries())];\n        });\n        localStorage.setItem(exports.PERSISTENCY_KEY, JSON.stringify(serializedCookies));\n    }\n    deleteExpiredCookies() {\n        const now = Date.now();\n        this.store.forEach((originCookies, origin) => {\n            originCookies.forEach(({ expires, name }) => {\n                if (expires !== undefined && expires.getTime() <= now) {\n                    originCookies.delete(name);\n                }\n            });\n            if (originCookies.size === 0) {\n                this.store.delete(origin);\n            }\n        });\n    }\n}\nexports.default = new CookieStore();\n});\n\nvar lib$1 = createCommonjsModule(function (module, exports) {\nvar __importDefault = (commonjsGlobal && commonjsGlobal.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PERSISTENCY_KEY = exports.store = void 0;\n\nObject.defineProperty(exports, \"store\", { enumerable: true, get: function () { return __importDefault(CookieStore_1).default; } });\nObject.defineProperty(exports, \"PERSISTENCY_KEY\", { enumerable: true, get: function () { return CookieStore_1.PERSISTENCY_KEY; } });\n});\n\nfunction getAllCookies() {\r\n    return parse_1$1(document.cookie);\r\n}\r\n/**\r\n * Returns relevant document cookies based on the request `credentials` option.\r\n */\r\nfunction getRequestCookies(request) {\r\n    /**\r\n     * @note No cookies persist on the document in Node.js: no document.\r\n     */\r\n    if (typeof location === 'undefined') {\r\n        return {};\r\n    }\r\n    switch (request.credentials) {\r\n        case 'same-origin': {\r\n            // Return document cookies only when requested a resource\r\n            // from the same origin as the current document.\r\n            return location.origin === request.url.origin ? getAllCookies() : {};\r\n        }\r\n        case 'include': {\r\n            // Return all document cookies.\r\n            return getAllCookies();\r\n        }\r\n        default: {\r\n            return {};\r\n        }\r\n    }\r\n}\n\nfunction setRequestCookies(request) {\r\n    var _a;\r\n    lib$1.store.hydrate();\r\n    request.cookies = Object.assign(Object.assign({}, getRequestCookies(request)), Array.from((_a = lib$1.store.get(Object.assign(Object.assign({}, request), { url: request.url.toString() }))) === null || _a === void 0 ? void 0 : _a.entries()).reduce((cookies, [name, { value }]) => Object.assign(cookies, { [name]: value }), {}));\r\n    request.headers.set('cookie', Object.entries(request.cookies)\r\n        .map(([name, value]) => `${name}=${value}`)\r\n        .join('; '));\r\n}\n\n/**\r\n * Ensures that an empty GET request body is always represented as `undefined`.\r\n */\r\nfunction pruneGetRequestBody(request) {\r\n    if (request.method &&\r\n        isStringEqual(request.method, 'GET') &&\r\n        request.body === '') {\r\n        return undefined;\r\n    }\r\n    return request.body;\r\n}\n\nfunction parseWorkerRequest(rawRequest) {\r\n    const request = {\r\n        id: rawRequest.id,\r\n        cache: rawRequest.cache,\r\n        credentials: rawRequest.credentials,\r\n        method: rawRequest.method,\r\n        url: new URL(rawRequest.url),\r\n        referrer: rawRequest.referrer,\r\n        referrerPolicy: rawRequest.referrerPolicy,\r\n        redirect: rawRequest.redirect,\r\n        mode: rawRequest.mode,\r\n        params: {},\r\n        cookies: {},\r\n        integrity: rawRequest.integrity,\r\n        keepalive: rawRequest.keepalive,\r\n        destination: rawRequest.destination,\r\n        body: pruneGetRequestBody(rawRequest),\r\n        bodyUsed: rawRequest.bodyUsed,\r\n        headers: new lib$2.Headers(rawRequest.headers),\r\n    };\r\n    // Set document cookies on the request.\r\n    setRequestCookies(request);\r\n    // Parse the request's body based on the \"Content-Type\" header.\r\n    request.body = parseBody(request.body, request.headers);\r\n    return request;\r\n}\n\nfunction readResponseCookies(request, response) {\r\n    lib$1.store.add(Object.assign(Object.assign({}, request), { url: request.url.toString() }), response);\r\n    lib$1.store.persist();\r\n}\n\nconst createRequestListener = (context, options) => {\r\n    return (event, message) => __awaiter(void 0, void 0, void 0, function* () {\r\n        const channel = createBroadcastChannel(event);\r\n        try {\r\n            const request = parseWorkerRequest(message.payload);\r\n            context.emitter.emit('request:start', request);\r\n            // Set document cookies on the request.\r\n            setRequestCookies(request);\r\n            const { response, handler, publicRequest, parsedRequest, } = yield getResponse(request, context.requestHandlers);\r\n            // Handle a scenario when there is no request handler\r\n            // found for a given request.\r\n            if (!handler) {\r\n                onUnhandledRequest(request, context.requestHandlers, options.onUnhandledRequest);\r\n                context.emitter.emit('request:unhandled', request);\r\n                context.emitter.emit('request:end', request);\r\n                return channel.send({ type: 'MOCK_NOT_FOUND' });\r\n            }\r\n            context.emitter.emit('request:match', request);\r\n            // Handle a scenario when there is a request handler,\r\n            // but it doesn't return any mocked response.\r\n            if (!response) {\r\n                console.warn('[MSW] Expected a mocking resolver function to return a mocked response Object, but got: %s. Original response is going to be used instead.', response);\r\n                context.emitter.emit('request:end', request);\r\n                return channel.send({ type: 'MOCK_NOT_FOUND' });\r\n            }\r\n            readResponseCookies(request, response);\r\n            const responseWithSerializedHeaders = Object.assign(Object.assign({}, response), { headers: lib$2.headersToList(response.headers) });\r\n            if (!options.quiet) {\r\n                setTimeout(() => {\r\n                    handler.log(publicRequest, responseWithSerializedHeaders, handler, parsedRequest);\r\n                }, response.delay);\r\n            }\r\n            context.emitter.emit('request:end', request);\r\n            channel.send({\r\n                type: 'MOCK_SUCCESS',\r\n                payload: responseWithSerializedHeaders,\r\n            });\r\n        }\r\n        catch (error) {\r\n            if (error instanceof NetworkError) {\r\n                // Treat emulated network error differently,\r\n                // as it is an intended exception in a request handler.\r\n                return channel.send({\r\n                    type: 'NETWORK_ERROR',\r\n                    payload: {\r\n                        name: error.name,\r\n                        message: error.message,\r\n                    },\r\n                });\r\n            }\r\n            // Treat all the other exceptions in a request handler\r\n            // as unintended, alerting that there is a problem needs fixing.\r\n            channel.send({\r\n                type: 'INTERNAL_ERROR',\r\n                payload: {\r\n                    status: 500,\r\n                    body: JSON.stringify({\r\n                        errorType: error.constructor.name,\r\n                        message: error.message,\r\n                        location: error.stack,\r\n                    }),\r\n                },\r\n            });\r\n        }\r\n    });\r\n};\n\nfunction requestIntegrityCheck(context, serviceWorker) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        // Signal Service Worker to report back its integrity\r\n        context.workerChannel.send('INTEGRITY_CHECK_REQUEST');\r\n        const { payload: actualChecksum } = yield context.events.once('INTEGRITY_CHECK_RESPONSE');\r\n        // Compare the response from the Service Worker and the\r\n        // global variable set by webpack upon build.\r\n        if (actualChecksum !== \"82ef9b96d8393b6da34527d1d6e19187\") {\r\n            throw new Error(`Currently active Service Worker (${actualChecksum}) is behind the latest published one (${\"82ef9b96d8393b6da34527d1d6e19187\"}).`);\r\n        }\r\n        return serviceWorker;\r\n    });\r\n}\n\n/**\r\n * Intercepts and defers any requests on the page\r\n * until the Service Worker instance is ready.\r\n * Must only be used in a browser.\r\n */\r\nfunction deferNetworkRequestsUntil(predicatePromise) {\r\n    // Defer any `XMLHttpRequest` requests until the Service Worker is ready.\r\n    const originalXhrSend = window.XMLHttpRequest.prototype.send;\r\n    window.XMLHttpRequest.prototype.send = function (...args) {\r\n        // Keep this function synchronous to comply with `XMLHttpRequest.prototype.send`,\r\n        // because that method is always synchronous.\r\n        until$1(() => predicatePromise).then(() => {\r\n            window.XMLHttpRequest.prototype.send = originalXhrSend;\r\n            this.send(...args);\r\n        });\r\n    };\r\n    // Defer any `fetch` requests until the Service Worker is ready.\r\n    const originalFetch = window.fetch;\r\n    window.fetch = (...args) => __awaiter(this, void 0, void 0, function* () {\r\n        yield until$1(() => predicatePromise);\r\n        window.fetch = originalFetch;\r\n        return window.fetch(...args);\r\n    });\r\n}\n\nfunction createResponseListener(context) {\r\n    return (_, message) => {\r\n        var _a;\r\n        const { payload: responseJson } = message;\r\n        /**\r\n         * CORS requests with `mode: \"no-cors\"` result in \"opaque\" responses.\r\n         * That kind of responses cannot be manipulated in JavaScript due\r\n         * to the security considerations.\r\n         * @see https://fetch.spec.whatwg.org/#concept-filtered-response-opaque\r\n         * @see https://github.com/mswjs/msw/issues/529\r\n         */\r\n        if ((_a = responseJson.type) === null || _a === void 0 ? void 0 : _a.includes('opaque')) {\r\n            return;\r\n        }\r\n        const response = new Response(responseJson.body || null, responseJson);\r\n        const isMockedResponse = response.headers.get('x-powered-by') === 'msw';\r\n        if (isMockedResponse) {\r\n            context.emitter.emit('response:mocked', response, responseJson.requestId);\r\n        }\r\n        else {\r\n            context.emitter.emit('response:bypass', response, responseJson.requestId);\r\n        }\r\n    };\r\n}\n\nconst DEFAULT_START_OPTIONS = {\r\n    serviceWorker: {\r\n        url: '/mockServiceWorker.js',\r\n        options: null,\r\n    },\r\n    quiet: false,\r\n    waitUntilReady: true,\r\n    onUnhandledRequest: 'bypass',\r\n    findWorker: (scriptURL, mockServiceWorkerUrl) => scriptURL === mockServiceWorkerUrl,\r\n};\r\nconst createStart = (context) => {\r\n    /**\r\n     * Registers and activates the mock Service Worker.\r\n     */\r\n    return function start(options) {\r\n        const resolvedOptions = mergeRight(DEFAULT_START_OPTIONS, options || {});\r\n        // Store the start options in the context so that other methods (like `stop`)\r\n        // could reference them.\r\n        context.startOptions = resolvedOptions;\r\n        const startWorkerInstance = () => __awaiter(this, void 0, void 0, function* () {\r\n            if (!('serviceWorker' in navigator)) {\r\n                throw new Error(`[MSW] Failed to register a Service Worker: this browser does not support Service Workers (see https://caniuse.com/serviceworkers), or your application is running on an insecure host (consider using HTTPS for custom hostnames).`);\r\n            }\r\n            // Remove all previously existing event listeners.\r\n            // This way none of the listeners persists between Fast refresh\r\n            // of the application's code.\r\n            context.events.removeAllListeners();\r\n            // Handle requests signaled by the worker.\r\n            context.workerChannel.on('REQUEST', createRequestListener(context, resolvedOptions));\r\n            context.workerChannel.on('RESPONSE', createResponseListener(context));\r\n            const instance = yield getWorkerInstance(resolvedOptions.serviceWorker.url, resolvedOptions.serviceWorker.options, resolvedOptions.findWorker);\r\n            const [worker, registration] = instance;\r\n            if (!worker) {\r\n                const missingWorkerMessage = (options === null || options === void 0 ? void 0 : options.findWorker)\r\n                    ? `[MSW] Failed to locate the Service Worker registration using a custom \"findWorker\" predicate.\n\nPlease ensure that the custom predicate properly locates the Service Worker registration at \"${resolvedOptions.serviceWorker.url}\".\nMore details: https://mswjs.io/docs/api/setup-worker/start#findworker\n`\r\n                    : `[MSW] Failed to locate the Service Worker registration.\n\nThis most likely means that the worker script URL \"${resolvedOptions.serviceWorker.url}\" cannot resolve against the actual public hostname (${location.host}). This may happen if your application runs behind a proxy, or has a dynamic hostname.\n\nPlease consider using a custom \"serviceWorker.url\" option to point to the actual worker script location, or a custom \"findWorker\" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start`;\r\n                throw new Error(missingWorkerMessage);\r\n            }\r\n            context.worker = worker;\r\n            context.registration = registration;\r\n            context.events.addListener(window, 'beforeunload', () => {\r\n                if (worker.state !== 'redundant') {\r\n                    // Notify the Service Worker that this client has closed.\r\n                    // Internally, it's similar to disabling the mocking, only\r\n                    // client close event has a handler that self-terminates\r\n                    // the Service Worker when there are no open clients.\r\n                    context.workerChannel.send('CLIENT_CLOSED');\r\n                }\r\n                // Make sure we're always clearing the interval - there are reports that not doing this can\r\n                // cause memory leaks in headless browser environments.\r\n                window.clearInterval(context.keepAliveInterval);\r\n            });\r\n            // Check if the active Service Worker is the latest published one\r\n            const [integrityError] = yield until$1(() => requestIntegrityCheck(context, worker));\r\n            if (integrityError) {\r\n                console.error(`\\\n[MSW] Detected outdated Service Worker: ${integrityError.message}\n\nThe mocking is still enabled, but it's highly recommended that you update your Service Worker by running:\n\n$ npx msw init <PUBLIC_DIR>\n\nThis is necessary to ensure that the Service Worker is in sync with the library to guarantee its stability.\nIf this message still persists after updating, please report an issue: https://github.com/open-draft/msw/issues\\\n      `);\r\n            }\r\n            // Signal the Service Worker to enable requests interception\r\n            yield activateMocking(context, options).catch((err) => {\r\n                throw new Error(`Failed to enable mocking: ${err === null || err === void 0 ? void 0 : err.message}`);\r\n            });\r\n            context.keepAliveInterval = window.setInterval(() => context.workerChannel.send('KEEPALIVE_REQUEST'), 5000);\r\n            return registration;\r\n        });\r\n        const workerRegistration = startWorkerInstance();\r\n        // Defer any network requests until the Service Worker instance is ready.\r\n        // This prevents a race condition between the Service Worker registration\r\n        // and application's runtime requests (i.e. requests on mount).\r\n        if (resolvedOptions.waitUntilReady) {\r\n            deferNetworkRequestsUntil(workerRegistration);\r\n        }\r\n        return workerRegistration;\r\n    };\r\n};\n\nconst createStop = (context) => {\r\n    /**\r\n     * Signal the Service Worker to disable mocking for this client.\r\n     * Use this an an explicit way to stop the mocking, while preserving\r\n     * the worker-client relation. Does not affect the worker's lifecycle.\r\n     */\r\n    return function stop() {\r\n        var _a;\r\n        context.workerChannel.send('MOCK_DEACTIVATE');\r\n        context.events.removeAllListeners();\r\n        context.emitter.removeAllListeners();\r\n        window.clearInterval(context.keepAliveInterval);\r\n        if (!((_a = context.startOptions) === null || _a === void 0 ? void 0 : _a.quiet)) {\r\n            console.log('%c[MSW] Mocking disabled.', 'color:orangered;font-weight:bold;');\r\n        }\r\n    };\r\n};\n\nfunction use(currentHandlers, ...handlers) {\r\n    currentHandlers.unshift(...handlers);\r\n}\r\nfunction restoreHandlers(handlers) {\r\n    handlers.forEach((handler) => {\r\n        handler.markAsSkipped(false);\r\n    });\r\n}\r\nfunction resetHandlers(initialHandlers, ...nextHandlers) {\r\n    return nextHandlers.length > 0 ? [...nextHandlers] : [...initialHandlers];\r\n}\n\n// Declare the list of event handlers on the module's scope\r\n// so it persists between Fash refreshes of the application's code.\r\nlet listeners = [];\r\n/**\r\n * Creates a new mock Service Worker registration\r\n * with the given request handlers.\r\n * @param {RequestHandler[]} requestHandlers List of request handlers\r\n * @see {@link https://mswjs.io/docs/api/setup-worker `setupWorker`}\r\n */\r\nfunction setupWorker(...requestHandlers) {\r\n    requestHandlers.forEach((handler) => {\r\n        if (Array.isArray(handler))\r\n            throw new Error(`[MSW] Failed to call \"setupWorker\" given an Array of request handlers (setupWorker([a, b])), expected to receive each handler individually: setupWorker(a, b).`);\r\n    });\r\n    const context = {\r\n        startOptions: undefined,\r\n        worker: null,\r\n        registration: null,\r\n        requestHandlers: [...requestHandlers],\r\n        emitter: new lib.StrictEventEmitter(),\r\n        workerChannel: {\r\n            on(eventType, callback) {\r\n                context.events.addListener(navigator.serviceWorker, 'message', (event) => {\r\n                    // Avoid messages broadcasted from unrelated workers.\r\n                    if (event.source !== context.worker) {\r\n                        return;\r\n                    }\r\n                    const message = jsonParse(event.data);\r\n                    if (!message) {\r\n                        return;\r\n                    }\r\n                    if (message.type === eventType) {\r\n                        callback(event, message);\r\n                    }\r\n                });\r\n            },\r\n            send(type) {\r\n                var _a;\r\n                (_a = context.worker) === null || _a === void 0 ? void 0 : _a.postMessage(type);\r\n            },\r\n        },\r\n        events: {\r\n            addListener(target, eventType, callback) {\r\n                target.addEventListener(eventType, callback);\r\n                listeners.push({ eventType, target, callback });\r\n                return () => {\r\n                    target.removeEventListener(eventType, callback);\r\n                };\r\n            },\r\n            removeAllListeners() {\r\n                for (const { target, eventType, callback } of listeners) {\r\n                    target.removeEventListener(eventType, callback);\r\n                }\r\n                listeners = [];\r\n            },\r\n            once(eventType) {\r\n                const bindings = [];\r\n                return new Promise((resolve, reject) => {\r\n                    const handleIncomingMessage = (event) => {\r\n                        try {\r\n                            const message = JSON.parse(event.data);\r\n                            if (message.type === eventType) {\r\n                                resolve(message);\r\n                            }\r\n                        }\r\n                        catch (error) {\r\n                            reject(error);\r\n                        }\r\n                    };\r\n                    bindings.push(context.events.addListener(navigator.serviceWorker, 'message', handleIncomingMessage), context.events.addListener(navigator.serviceWorker, 'messageerror', reject));\r\n                }).finally(() => {\r\n                    bindings.forEach((unbind) => unbind());\r\n                });\r\n            },\r\n        },\r\n    };\r\n    // Error when attempting to run this function in a Node.js environment.\r\n    if (isNodeProcess()) {\r\n        throw new Error('[MSW] Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead.');\r\n    }\r\n    return {\r\n        start: createStart(context),\r\n        stop: createStop(context),\r\n        use(...handlers) {\r\n            console.log('adding new handlers', handlers);\r\n            use(context.requestHandlers, ...handlers);\r\n        },\r\n        restoreHandlers() {\r\n            restoreHandlers(context.requestHandlers);\r\n        },\r\n        resetHandlers(...nextHandlers) {\r\n            context.requestHandlers = resetHandlers(requestHandlers, ...nextHandlers);\r\n        },\r\n        printHandlers() {\r\n            context.requestHandlers.forEach((handler) => {\r\n                const { header, callFrame } = handler.info;\r\n                const pragma = handler.info.hasOwnProperty('operationType')\r\n                    ? '[graphql]'\r\n                    : '[rest]';\r\n                console.groupCollapsed(`${pragma} ${header}`);\r\n                if (callFrame) {\r\n                    console.log(`Declaration: ${callFrame}`);\r\n                }\r\n                console.log('Handler:', handler);\r\n                if (handler instanceof RestHandler) {\r\n                    console.log('Match:', `https://mswjs.io/repl?path=${handler.info.mask}`);\r\n                }\r\n                console.groupEnd();\r\n            });\r\n        },\r\n        on(eventType, listener) {\r\n            context.emitter.addListener(eventType, listener);\r\n        },\r\n    };\r\n}\n\nexport { setupWorker };\n"]},"metadata":{},"sourceType":"module"}